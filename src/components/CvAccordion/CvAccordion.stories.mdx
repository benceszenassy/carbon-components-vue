import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { sbCompPrefix } from '../../global/storybook-utils';

import CvAccordionStory, * as CvAccordionStories from './CvAccordion.stories.js';
import { CvAccordion, CvAccordionItem } from '.';

<Meta
  title={`${sbCompPrefix}/CvAccordion`}
  argTypes={CvAccordionStory.argTypes}
/>

# CvAccordion

<Canvas>
  <Story name="Default" story={CvAccordionStories.Default} />
</Canvas>

<!--
FIXME: ArgsTable broken on 6.5 for vue, its fixed in 7+

## Component API

<ArgsTable components={CvAccordionStories.Default} />
-->

# Control open state with v-model

- Notes: The Vue 2 component does not support v-model. One interesting implementation using this would be to create an
  "auto close" component such that opening one section closes other sections.

```javascript
// example auto close
// <cv-accordion @change="onAutoClose">
const open = ref({
  accItem1: false,
  accItem2: false,
  accItem3: false,
  accItem4: false,
});
function autoClose(ev) {
  if (ev.change.open) {
    for (let state in open.value) {
      if (state !== ev.change.id) open.value[state] = false;
    }
  }
}
```

<Canvas>
  <Story name="VModel" story={CvAccordionStories.VModel} />
</Canvas>

<Canvas>
  <Story name="Skeleton" story={CvAccordionStories.Skeleton} />
</Canvas>
